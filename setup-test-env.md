# Test Environment Setup

## Quick Setup for Testing

### 1. Create Environment File
Create a `.env.local` file in the project root with your API keys:

```bash
# Copy this template and add your actual API keys

# Supabase (Required for database)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# OpenAI (Required for LLM functionality)
OPENAI_API_KEY=sk-your-openai-api-key

# Optional - Other providers (for future testing)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key
GOOGLE_API_KEY=your-google-api-key
PERPLEXITY_API_KEY=pplx-your-perplexity-key

# Application Configuration
NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development
```

### 2. Supabase Database Setup
If you haven't set up Supabase yet:

1. Go to [supabase.com](https://supabase.com) and create a new project
2. Copy the SQL schema from `docs/08-database-setup.md` 
3. Run it in the Supabase SQL editor
4. Get your URL and keys from Settings â†’ API

### 3. Test the Application

```bash
# Start development server
npm run dev

# Visit the test page
open http://localhost:3000/test
```

## What You Can Test

### âœ… Basic Functionality
- [ ] Session configuration validation
- [ ] Session creation and database persistence
- [ ] Real-time updates and subscriptions
- [ ] Analytics calculation and display

### âœ… LLM Integration
- [ ] OpenAI provider connection
- [ ] Message generation and processing
- [ ] Token counting and cost estimation
- [ ] Error handling for API failures

### âœ… State Management
- [ ] React Context state updates
- [ ] Hook functionality and optimization
- [ ] Error states and loading indicators
- [ ] Session lifecycle management

## Test Scenarios

### Scenario 1: Basic Session Flow
1. Configure a simple topic and 2 participants
2. Start session (should create database records)
3. Send a few messages (should see real-time updates)
4. Check analytics (should show token usage)
5. Stop session (should complete gracefully)

### Scenario 2: Error Handling
1. Try starting without API keys (should show error)
2. Try invalid configuration (should show validation errors)
3. Try sending message without session (should handle gracefully)

### Scenario 3: Real-time Features
1. Start a session
2. Open browser dev tools â†’ Network tab
3. Send messages and observe WebSocket connections
4. Check that analytics update in real-time

## Troubleshooting

### Common Issues

**"Provider openai is not available"**
- Check that `OPENAI_API_KEY` is set in `.env.local`
- Verify the API key is valid

**"Session not found" or database errors**
- Check Supabase URL and keys in `.env.local`
- Verify database schema is created
- Check Supabase dashboard for connection issues

**"Failed to start session"**
- Check browser console for detailed errors
- Verify all required environment variables
- Check network connectivity

### Debug Mode
Add this to `.env.local` for more detailed logging:
```bash
DEBUG=true
```

## Expected Behavior

### âœ… Successful Test Run Should Show:
- Configuration validation working
- Session creation in database
- Messages being generated by OpenAI
- Real-time updates in the UI
- Analytics calculations
- Proper error handling

### ðŸš¨ Red Flags to Watch For:
- Console errors about missing dependencies
- Network errors when connecting to APIs
- Database connection failures
- State not updating properly
- Memory leaks in subscriptions

## Next Steps After Testing

Once basic functionality is working:
1. âœ… Move to Phase 3: Main Components
2. âœ… Build the actual UI components
3. âœ… Add more LLM providers
4. âœ… Implement API routes
5. âœ… Add comprehensive error handling
